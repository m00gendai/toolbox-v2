<!DOCTYPE html>
<html lang="en">
<!-- BEGIN Head -->
	<head>
<!-- BEGIN Meta Information -->
        <meta charset="UTF-8">		
		<meta name="description" content="AIM Operations Zurich Toolbox V2">
		<meta name="author" content="Marcel Weber">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- END Meta Information -->
		<title>Toolbox V2</title>
<!-- BEGIN Necessary Scripts -->
		<script src="JS/jquery-3.6.0.min.js"></script> 
		<script src="JS/script.js" defer></script> <!-- Main JavaScript Code -->
		<script src="JS/all.min.js" defer></script> <!-- Font Awesome -->
		<script src="JS/tileLinks.js" defer></script> <!-- JSON for Home Page - Tile Links -->
		<script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script> 
        <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script> 
        <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> 
<!-- END Necessary Scripts -->
<!-- BEGIN Stylesheets -->
		<link rel="stylesheet" href="CSS/styles.css" id="styleSheetStyles"> <!-- General Styles -->
		<link rel="stylesheet" href="CSS/menubar.css" id="styleSheetMenuBar"> <!-- Menu Bar & Footer -->
		<link rel="stylesheet" href="CSS/aipbox.css"> <!-- AIP Library -->
		<link rel="stylesheet" href="CSS/atsbox.css"> <!-- ATS MSG Search -->
		<link rel="stylesheet" href="CSS/frenchBox.css"> <!-- French Translation Section -->
		<link rel="stylesheet" href="CSS/sitaBox.css"> <!-- SITA Address Converter -->
		<link rel="stylesheet" href="CSS/doctoolbox.css"> <!-- DOC Screening Tool -->
		<link rel="stylesheet" href="CSS/legal.css"> <!-- Legal Statement Popup -->
		<link rel="stylesheet" href="CSS/optionsMenu.css"> <!-- DOC Tool Options Menu -->
		<link rel="stylesheet" href="CSS/achievements.css"> <!-- Achievement Unlocked -->
		<link rel="stylesheet" href="CSS/profileMenu.css" id="styleSheetProfileMenu">      
		<link rel="stylesheet" href="CSS/profileMenuTogglers.css" >      
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dragula/3.6.6/dragula.min.css" integrity="sha512-49xW99xceMN8dDoWaoCaXvuVMjnUctHv/jOlZxzFSMJYhqDZmSF/UnM6pLJjQu0YEBLSdO1DP0er6rUdm8/VqA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<!-- END Stylesheets -->
		<link rel="icon" href="Favicon/favicon.ico?v=2" />        <!-- Browser Tab Icon -->
	</head>
<!-- END Head -->
<!-- BEGIN Navigation Bar -->
	<nav>
		<ul>
			<li id="home">
                Home
            </li>
			<li id="ats">
                ATS MSG Search
            </li>
			<li id="aip">
                AIP Library
            </li>
			<li id="doctool">
                DOC Screening Tool
            </li>
			<li id="favoritesTogglor" title="Toggle Favorites">
                <i class="fas fa-star"></i>
            </li>
            <li id="profileMenuToggle"><i class="far fa-user-circle"></i></li>
		</ul>
	</nav>
<!-- END Navigation Bar -->
<!-- BEGIN Body -->
	<body>
<!-- BEGIN Section Home  -->
        <section id="contentBox">
            <div class="title" id="searchBarContainer">
                <input class="mainInput" type="text" id="searchBar" autofocus placeholder="Welcome to the AIM Info Hub">
                <div class="sortBoxHome">
                    <div class="sortBoxHomeTitle">
                        Sort tiles by:
                    </div>
                    <div class="sortBoxHomeAZ" id="sortBoxHomeAZ">
                        A-Z
                    </div>
                    <div class="sortBoxHomeTyp" id="sortBoxHomeTyp">
                        CAT
                    </div>
                </div>
            </div>
            <div id="favoritesBar" name="favoritesBar">
                <div id="favoritesMessage">
                    Drag & Drop your favorite Links here<br>Toggle this container with the Star symbol in the navigation bar
                </div>
            </div>
            <div class="container" id="quickLinks">
            </div>
        </section>
<!-- END Section Home -->
<!-- BEGIN Section AIP Library -->
        <section id="aipBox">
            <div class="title" id="aipBoxTitle">
                <input class="aipInput" type="text" id="aipBar" autofocus placeholder="Search for country name or code">
            </div>
            <div class="container">
                <div class="colorCodesContainer">
                    <div class="colorCodes">
                        <button title="View Logins" class="aipSpan" id="aipLogins">
                            <!-- Text content set in aipLibrary.js -->
                        </button>
                        <button title="Filter Tiles" class="aipSpan" id="spanGreen">
                            <!-- Text content set in aipLibrary.js -->
                        </button>    
                        <button title="Filter Tiles" class="aipSpan" id="spanYellow">
                            <!-- Text content set in aipLibrary.js -->
                        </button>
                        <button title="Filter Tiles" class="aipSpan" id="spanRed">
                            <!-- Text content set in aipLibrary.js -->
                        </button>
                        <button title="Filter Tiles" class="aipSpan" id="spanBlack">
                            <!-- Text content set in aipLibrary.js -->
                        </button>
                        <button class="aipSpan" id="sortAipTilesByNone">
                            <!-- Text content set in aipLibrary.js -->
                        </button>
                        <button class="aipSpan" id="sortAipTilesByICAO">
                            <!-- Text content set in aipLibrary.js -->
                        </button>
                        <button class="aipSpan" id="sortAipTilesByName">
                            <!-- Text content set in aipLibrary.js -->
                        </button>
                    </div>
                </div>
                <div class="missingCountrySpoiler" id="misCtry">
                    <div class="missingCountrySpoilerTitle">
                        Missing Countries
                    </div>
                    <div class="missingCountrySpoilerContent" id="misCtryCnt">
                        <ul>
                            <li>Cabo Verde</li>
                            <li>Caroline Islands</li>
                            <li>Central Kiribati</li>
                            <li>Ceuta</li>
                            <li>Djibouti</li>
                            <li>Eritrea</li>
                            <li>Ethiopia</li>
                            <li>Falkland Islands</li>
                            <li>Fiji</li>
                            <li>French Guyana</li>
                            <li>French Polynesia</li>
                            <li>Futuna Islands</li>
                            <li>Gibraltar</li>
                            <li>Guadeloupe</li>
                            <li>Guam</li>
                            <li>Guinea</li>
                            <li>Guinea Bissau</li>
                            <li>Guyana</li>
                            <li>Jamaica</li>
                            <li>Laos</li>
                            <li>Liberia</li>
                            <li>Line Islands</li>
                            <li>Maledives</li>
                            <li>Mali</li>
                            <li>Marshall Islands</li>
                            <li>Martinique</li>
                            <li>Mauritania</li>
                            <li>Melilla</li>
                            <li>Micronesia</li>
                            <li>Midway Atoll</li>
                            <li>Monaco</li>
                            <li>Morocco</li>
                            <li>New Caledonia</li>
                            <li>North Korea</li>
                            <li>Northern Mariana Islands</li>
                            <li>Palau</li>
                            <li>Palestine</li>
                            <li>Peru</li>
                            <li>Philippines</li>
                            <li>Puerto Rico</li>
                            <li>Saint Barthelemy</li>
                            <li>Saint Martinique</li>
                            <li>Saint Pierre and Miquelon</li>
                            <li>Senegal</li>
                            <li>Sierra Leone</li>
                            <li>South Sudan</li>
                            <li>Sudan</li>
                            <li>Suriname</li>
                            <li>Switzerland</li>
                            <li>Syria</li>
                            <li>Tanzania</li>
                            <li>Turks and Caicos Island</li>
                            <li>US Virgin Islands</li>
                            <li>Wake Island</li>
                            <li>Wallis</li>
                            <li>Western Kiribati</li>
                            <li>Western Sahara</li>
                            <li>Yemen</li>
                        </ul>
                    </div>
                </div>
                <div id="alphabetSoup">
                </div>
                <div id="aipLinks">
                </div>
            </div>
            <div id="toTopAIPlibrary">
                <i class="far fa-arrow-alt-circle-up" title="Back to Top"></i>
            </div>
        </section>
<!-- END Section AIP Library -->
<!-- BEGIN Section Flight Search -->
        <section class = "sectionClass" id="atsBox">
            <div class="title" id="atsTitle">
                Search for Flight Plans, Assosciated Messages and other ATS Messages on ACC and ARO Queues.<br>
                Flight Rules are ignored for all message types except FPL.</br>
                Queries can be triggered with the "enter" key in each input field. Use the "%" character as a wildcard (example: DEP LS%, %ZH, LS%H, L%Z%, %S%H, ...) for ACFT ID, DEP, DEST and FULL TEXT.
            </div>
            <div class="FScontainer">
                <div id="atsBoxForm">
                    <div class="annotation">
                        ACFT ID:
                    </div>
                    <input type="text" id="ident" name="ident" placeholder="HBLOL">       
                    <div class="filler">
                    </div>
                    <div class="annotation">
                        Message Type:
                    </div>
                    <input type="text" id="msgtype" name="msgtype" placeholder="FPL">
                    <div class="filler">
                    </div>
                    <div class="annotation">
                        EOBD from / to:
                    </div>
                    <input type="date" id="eobdfrom" name="eobdfrom" >	
                    <input type="date" id="eobdto" name="eobdto" >       
                    <div class="annotation">
                        Flight Rules:
                    </div>
                    <select name="fltrule" id="fltrule">
                        <option value="V">V - VFR</option>
                        <option value="I">I - IFR</option>
                        <option value="Z">Z - VFR - IFR</option>
                        <option value="Y">Y - IFR - VFR</option>
                    </select>
                    <div class="filler">
                    </div>
                    <div class="annotation">
                        DEP from - DEST to:
                    </div>
                    <input type="text" id="dep" name="dep" placeholder ="LSZH">
                    <input type="text" id="dest" name="dest" placeholder="LSGG">
                    <div class="annotation">
                        Full Text Search:
                    </div>
                    <input type="text" id="fulltext" name="fulltext" placeholder ="Full text search">
                    <div class="annotation">
                        Message Direction:
                    </div>
                    <select name="msgdir" id="msgdir">
                        <option value="All">In- & Outbound</option>
                        <option value="Inbound">Inbound</option>
                        <option value="Outbound">Outbound</option>
                    </select>
                    <div class="filler">
                    </div>
                    <div class="annotation">
                        Message Queues:
                    </div>
                    <select name="queue" id="queue">
                        <option value="all">All</option>
                        <option value="accz:/zurich">ACCZ:/Zurich</option>
                        <option value="accg:/geneva">ACCG:/Geneva</option>
                        <option value="gva:/gda">GVA:/GDA</option>
                        <option value="ZRH%3A%2FARO">ZRH:/ARO</option>
                        <option value="zrh:/supervisor">ZRH:/supervisor</option>
                    </select>
                    <div class="filler">
                    </div>
                </div>
                <div id="fsIframeContainer">
                    <p>Flight Events will be displayed here</p>
                </div>
            </div>
            <button id="atsButton" onsubmit="return false">
                Submit
            </button>
        </section>
<!-- END Section Flight Search -->
<!-- BEGIN Section French Translation -->
        <section id="frenchBox" >
            <div class="inputField" id="inputField">
                <div class="g1">
                    <input type="text" id="searchAll" name="searchAll" placeholder="Alles durchsuchen">
                </div>
                <div class="g2">
                    <input type="text" id="searchFrench" name="searchFrench" placeholder="Französisch durchsuchen">
                </div>
                <div class="g3">
                    <input type="text" id="searchGerman" name="searchGerman" placeholder="Deutsch durchsuchen">
                </div>
            </div>
            <div class="inputField2" id="inputField2">
                <button class="switchButton" id="buttonSFO">
                    SFO Helpdesk
                </button>
                <button class="switchButton" id="buttonGeneral">
                    Skybriefing Helpdesk
                </button>
                <button class="switchButton" id="buttonWhatever">
                    AIP Helpdesk
                </button>
                <button class="switchButton" id="buttonAnother">
                    Vocabulaire technique général
                </button>
                <button class="switchButton" id="buttonLastOne">
                    Vocabulaire divers de l'AIS
                </button>
            </div>
            <table id="frenchTable">
                <tbody>
                </tbody>
            </table>
            <div id="frenchContact">
                <div id="frenchContactTitle">
                    Inputs
                </div>
                <form id="frenchContactForm" action="https://getform.io/f/1160c557-07a8-49e3-a961-f682d7e19353" method="POST" target="_blank">
                    <input id="frenchContactMail" type="email" name="email" placeholder="your.name@skyguide.ch" required>
                    <textarea id="frenchContactText" name="text" placeholder="Wenn ihr Vorschläge oder Wünsche habt, dann schreibt an Christine! Für technisches Feedback, wendet euch an Mäse" required>
                    </textarea>
                    <button id="frenchContactSend">
                        Send
                    </button>
                </form>
                <div id="frenchContactArrow">
                    FEEDBACK&NewLine;<i class="fas fa-angle-right"></i>
                </div>
            </div>
            <div id="toTop">
                <i class="far fa-arrow-alt-circle-up" title="Zurück nach oben"></i>
            </div>
        </section>
<!-- END Section French Translation -->
<!-- BEGIN Section SITA Conversion -->
        <section id="sitaBox">
            <div id="loadingSpinnerContainer">
                <div id="loadingSpinner">
                </div>
            </div>
            <div class="queryBar">
                <input type="text" id="inputSita" maxlength="7" placeholder="Enter SITA address" tabindex="0">
                <button id="inputSitaSearch">
                    Search
                </button>
            </div>
            <div class="intro">
                <br>
                This tool decodes a SITA address to approximately determine the origin of an ATS message.<br>
                <br>
                SITA addresses are comprised of:<br>
                <br>
                IATA Location code | IATA Airline code | IATA Department code / company code<br>
                <br>
                Usually in that order. However, sometimes, the airline code comes before the department/company code.<br>
                There are also circa 50 reserved codes that are included instead of a location code.<br>
                Sometimes, the first three letters can refer to the airline or corporation.<br>
                SITA is really inconsistent.<br>
                <br>
                Therefore, this lookup simply returns all matching data to a SITA code segment; it has then to be interpreted manually.<br>
                <br>
            </div>
            <div class="dissect" id="dissect">
            </div>
        </section>
<!-- END Section SITA Conversion -->
<!-- BEGIN Section DOC Screening Tool Section -->
        <section id="doctoolBox">
            <div class="optionsButton" id="optionsButton">
                <i class="fas fa-cog"></i>
            </div>
            <div id="optionsMenu">
                <div id="optionsDocToolHelp">
                    <div id="optionsDocToolHelpTitle">
                        Help Dialog
                    </div>
                    <div id="optionsDocToolHelpToggler">
                        Hide <input type="range" id="optionsDocToolHelpRange" name="HelpRange" min="0" max="1" value="0"> Show
                    </div>
                </div>
                <div id="optionsLociDatabase">
                    <div id="optionsLociDatabaseTitle">
                        LOCI Lookup Database
                    </div>
                    <div id="optionsLociDatabaseToggler">
                        Hide <input type="range" id="optionsLociDatabaseRange" name="LociRange" min="0" max="1" value="1"> Show
                    </div>
                </div>
                <div id="optionsPrintDialog">
                    <div id="optionsPrintDialogTitle">
                        Print Dialog for Screening
                    </div>
                    <div id="optionsPrintDialogToggler">
                        Hide <input type="range" id="optionsPrintRange" name="PrintRange" min="0" max="1" value="1"> Show
                    </div>
                </div>
                <div id="optionsRecoverData">
                    <div id="optionsRecoverDataTitle">
                        Recover Screening Data <br> (Refresh page first to recover deleted fields)
                    </div>
                    <div id="optionsRecoverDataToggler">
                        Recover
                    </div>
                </div>
                <div id="optionsLoadSave">
                    <div id="optionsLoadSaveTitle">
                        Save & Load Screening Data
                    </div>
                    <div id="optionsLoadSaveToggler">
                        <div id="optionsLoadSaveSave">
                        </div>
                        <input type="file" id="loadDocScreening" name="loadDocScreening">
                        <label for="loadDocScreening" id="optionsLoadSaveLoad" title="Load Screening session from file">
                            Load Screening session from file
                        </label>
                    </div>
                </div>
            </div>
            <div class="halpText" id="halpText">
                <strong>LOCI Lookup Database</strong>
                <br>
                <br>
                Enter the LOCI letters into the input field and see which airports Flightkeys need screened.<br>
                L -> Shows everything starting with L<br>
                LS -> Shows everything starting with LS<br>
                And so on.
                <br>
                <hr>
                <br>
                <strong>Print Dialog for Screening</strong>
                <br>
                <br>
                This tool is used in conjunction with a document to be screened.<br>
                Enter the page range to be printed into the relevant input fields.<br>
                At the end, it will show how many pages there are printed and to be entered into the Zeiterfassung.<br>
                <br>
                By pressing <kbd>Copy</kbd>, a popup appears.<br>
                <br>
                The popup:
                <ul>
                    <li>displays the page range to be entered into the print dialog of the pdf document</li>
                    <li>shows for which customer the page range is for</li>
                    <li>splits the page range if it detects a single page (1-4,<b>7</b>,9-10)</li>
                    <li>adds a single page at the end of a sequence and adds subsequent single pages in a separate row</li>
                    <li>splits the page range if it detects a range that results in an odd number of pages (1-4,<b>6-8</b>,10-11)</li>
                    <li>adds the odd range at the end of a sequence and adds subsequent odd ranges in a separate row</li>
                </ul>
                <br>
                The tool:
                <ul>
                    <li>adds the page count when tabbing out of an input field or when clicking the <kbd>Calculate Pages</kbd> button</li>
                    <li>alerts you if it detects any other character besides a number, a dash (-) or a comma (,)</li>
                    <li>alerts you if it detects a wrong sequence of page numbers (1-4-7 instead of 1-4,7)</li>
                    <li>alerts you if it detects two special characters in a row (1-4,,7-10)</li>
                    <li>alerts you if it detects the input being longer than 100 characters (and shows you where the overflow happens)</li>
                    <li>ignores spaces, i.e. prevents them entirely</li>
                    <li>stores entries in local memory so entered inputs are not lost if the page is refreshed or the browser window is closed</li>
                </ul>
                <br>
                The options menu:
                <ul>
                    <li>Toggles the help dialog on or off</li>
                    <li>Toggles the lookup database on or off</li>
                    <li>Toggles screening dialog on or off</li>
                    <li>Recovers entered data after a refresh or closure of the browser</li>
                    <li>Lets you save your progress to a file, with the file name taken from the Document Name field</li>
                    <li>Lets you load a saved progress file to continue the screening</li>
                <hr>
                <br>
                For any questions or bug reports, feel free to reach out to <a href="http://phone.skyguide.corp/Default.asp?ID=4440&user=" target="_blank">Marcel Weber</a>.
            </div>
            <div class="docContent">
                <div class="queryContainer" id="queryContainer">
                    <div class="containerTitle">
                        LOCI Lookup Database <span style="font-size:0.5rem">WEF 27 JUN 21</span>
                    </div>
                    <input id="queryFK" placeholder="Search for LOCI">
                    <div class="queryFKresults">
                        <table id="FKresultsTable">
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="screeningContainer" id="screeningContainer">
                    <div class="containerTitle">
                        Print Dialog for Screening
                    </div>
                    <fieldset id="fieldsetDocument">
                        <legend id="legendDocument">
                            Document Name
                        </legend>
                        <textarea class="screenField" id="screenDocument" placeholder="LS AIRAC AMDT 13/21 (This will be the file name if you save your progress)">
                        </textarea>
                    </fieldset>
                    <fieldset id="fieldsetFKDF">
                        <legend id="legendFKDF" class="inputLegend">
                            Flightkeys Daily Folder
                        </legend>
                        <div class="textFieldContainer">
                            <textarea class="screenField" id="screenFKDF" placeholder="1-4,10-15,17,20-25,...">
                            </textarea>
                            <div class="clearButtonContainer">
                                <button class="clearScreeningPages" id="clearFKDF" tabindex="-1" title="Delete entries">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="screenAlert" id="screenFKDFalert">
                        </div>
                    </fieldset>
                    <fieldset id="fieldsetFKAT">
                        <legend id="legendFKAT" class="inputLegend">
                            Flightkeys AIP Tool
                        </legend>
                        <div class="textFieldContainer">
                            <textarea class="screenField" id="screenFKAT" placeholder="1-4,10-15,17,20-25,...">
                            </textarea>
                            <div class="clearButtonContainer">
                                <button class="clearScreeningPages" id="clearFKAT" tabindex="-1" title="Delete entries">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="screenAlert" id="screenFKATalert">
                        </div>
                    </fieldset>
                    <fieldset id="fieldsetNTM">
                        <legend id="legendNTM" class="inputLegend">
                            Team NOTAM
                        </legend>
                        <div class="textFieldContainer">
                            <textarea class="screenField" id="screenNTM" placeholder="1-4,10-15,17,20-25,...">
                            </textarea>
                            <div class="clearButtonContainer">
                                <button class="clearScreeningPages" id="clearNTM" tabindex="-1" title="Delete entries">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="screenAlert" id="screenNTMalert">
                        </div>
                    </fieldset>
                    <fieldset id="fieldsetDBU">
                        <legend id="legendDBU" class="inputLegend">
                            DBU
                        </legend>
                        <div class="textFieldContainer">
                            <textarea class="screenField" id="screenDBU" placeholder="1-4,10-15,17,20-25,...">
                            </textarea>
                            <div class="clearButtonContainer">
                                <button class="clearScreeningPages" id="clearDBU" tabindex="-1" title="Delete entries">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="screenAlert" id="screenDBUalert">
                        </div>
                    </fieldset>
                    <fieldset id="fieldsetIATA">
                        <legend id="legendIATA" class="inputLegend">
                            IATA
                        </legend>
                        <div class="textFieldContainer">
                            <textarea class="screenField" id="screenIATA" placeholder="1-4,10-15,17,20-25,...">
                            </textarea>
                            <div class="clearButtonContainer">
                                <button class="clearScreeningPages" id="clearIATA" tabindex="-1" title="Delete entries">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="screenAlert" id="screenIATAalert">
                        </div>
                    </fieldset>
                    <button id="calculatePages">
                        Calculate Pages
                    </button>
                    <div class="pageDisplay">
                        <div class="pageDisplayTitleRow">
                            <div id="thScreen">
                                Screen for
                                </div>
                            <div id="thPages">
                                Pages
                                </div>
                            <div id="thCopy">
                            </div>
                        </div>
                        <div class="pageDisplayRow">
                            <div class="tdLabel" id="tdLabelFKDF">
                                Flightkeys Daily Folder
                            </div>
                            <div class="pageTD" id="FKDFtd">
                            </div>
                            <div id="copyFKDF" class="copyButtonContainer">
                                <button id="buttonCopyFKDF" class="buttonCopy">
                                    Copy
                                </button>
                            </div>
                        </div>
                        <div class="pageDisplayRow" >
                            <div class="tdLabel" id="tdLabelFKAT">
                                Flightkeys AIP Tool
                            </div>
                            <div class="pageTD" id="FKATtd">
                            </div>
                            <div id="copyFKAT" class="copyButtonContainer">
                                <button id="buttonCopyFKAT" class="buttonCopy">
                                    Copy
                                </button>
                            </div>
                        </div>
                        <div class="pageDisplayRow">
                            <div class="tdLabel" id="tdLabelNTM">
                                Team NOTAM
                            </div>
                            <div class="pageTD" id="NTMtd">
                            </div>
                            <div id="copyNTM" class="copyButtonContainer">
                                <button id="buttonCopyNTM" class="buttonCopy">
                                    Copy
                                </button>
                            </div>
                        </div>
                        <div class="pageDisplayRow">
                            <div class="tdLabel" id="tdLabelDBU">
                                DBU
                            </div>
                            <div class="pageTD" id="DBUtd">
                            </div>
                            <div id="copyDBU" class="copyButtonContainer">
                                <button id="buttonCopyDBU" class="buttonCopy">
                                    Copy
                                </button>
                            </div>
                        </div>
                        <div class="pageDisplayRow">
                            <div class="tdLabel" id="tdLabelIATA">
                                IATA
                            </div>
                            <div class="pageTD" id="IATAtd">
                            </div>
                            <div id="copyIATA" class="copyButtonContainer">
                                <button id="buttonCopyIATA" class="buttonCopy">
                                    Copy
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="testHTMLContainer">
                    <div id="testHTMLTitle">
                    </div>
                    <div id="testHTML">
                    </div>
                    <button id="testHTMLClose">
                        Close
                    </button>
                </div>
            </div>
        </section>
<!-- END Section DOC Screening Tool Section -->
<!-- BEGIN Legal Statement -->
        <div id="legalA">
            <div id="legalB">
                <div class="legalTitle">
                    Legal Statement
                </div>
                Developed for skyguide AIM Services by <a href="http://phone.skyguide.corp/Default.asp?ID=4440&user=" target="_blank">Marcel Weber</a>.<br><br>
                Links to internal (skyguide) and/or external resources are under the sole responsibility of the respective owner(s). AIM Services and <a href="http://phone.skyguide.corp/Default.asp?ID=4440&user=" target="_blank">Marcel Weber</a> will assume no liability for the contents of external links.<br><br>
                Original Tools: <br>
                <ul>
                    <li>SITA Address Decoder by <a href="http://phone.skyguide.corp/Default.asp?ID=4440&user=" target="_blank">Marcel Weber</a> (Development)</li>
                    <li>SFO French by <a href="http://phone.skyguide.corp/Default.asp?ID=4440&user=" target="_blank">Marcel Weber</a> (Development) & <a href="http://phone.skyguide.corp/Default.asp?ID=4437" target="_blank">Christine Bissey</a> (Content & Requirements)</li>
                    <li>DOC Tool by <a href="http://phone.skyguide.corp/Default.asp?ID=4440&user=" target="_blank">Marcel Weber</a> (Development)</li>
                </ul>
                <br>
                Image Usage Rights: <br>
                <ul>
                    <li>
                        Icons by 
                        <ul>
                            <li><a href="https://www.flaticon.com/" target="_blank">flaticon.com</a></li>
                            <li><a href="https://icons8.com/" target="_blank">icons8.com</a></li>
                        </ul>
                    </li>
                    <li>Flags from <a href="https://commons.wikimedia.org/wiki/Main_Page" target="_blank">Wikimedia Commons</a></li>
                    <li>Photographs from <a href="https://pixabay.com" target="_blank">Pixabay</a></li>
                </ul>
                <br>
                A source code backup is stored in a private git repo by <a href="http://phone.skyguide.corp/Default.asp?ID=4440&user=" target="_blank">Marcel Weber</a>. <br>This repo is also used to update the AIS local instance.<br><br>
                Trello is used as a changelog and ticketing service. Please refer to the <a href="https://trello.com/b/lPvSDcli" target="_blanK">Toolbox V2 Kanban Board</a>. <br><br>For issue reports and feature requests, please advise <a href="http://phone.skyguide.corp/Default.asp?ID=4440&user=" target="_blank">Marcel Weber</a> directly.<br>
                An online ticketing service for AIM personnel is not planned.<br> <br>
                Tech stack:<br>
                <ul>
                    <li>HTML5</li>
                    <li>CSS3</li>
                    <li>JavaScript</li>
                        <ul>
                            <li>jQuery</li>
                            <li>lodash</li>
                            <li>dragula</li>
                            <li>React</li>
                            <li>JSX/li>
                            <li>amCharts</li>
                            <li>JSON</li>
                        </ul>
                    <li>Python 3.9</li>
                    <li>git</li>
                    <li>API</li>
                        <ul>
                            <li>getform.io</li>
                            <li>Firebase<li>
                        </ul>
                    <li>Firebase</li>
                        <ul>
                            <li>Auth</li>
                            <li>Firestore</li>
                        </ul>
                </ul>
                <div id="legalCopy">
                </div>
            </div>
            <div id="close">
                <i class="far fa-thumbs-up"></i>
            </div>
        </div>
<!-- END Legal Statement -->
<!-- BEGIN Achievement -->
        <div id="achievementContainer">
            <div id="achievement">
                <div class="achievementIcon">
                    <i class="fas fa-trophy"></i>
                </div>
                <div id="achievementText">
                    <div id="achievementTitle">
                        Achievement Unlocked
                    </div>
                    <div id="achievementDetail">
                        Tried to add the same Favorite twice
                    </div>
                </div>
            </div>
        </div>
<!-- END Achievement -->
<!-- BEGIN Profile Menu -->
    <aside id="profileMenu">
        <div id="profileMenuContainer">
            <!-- See below at <script data-type="module" type="text/babel"> -->
        </div>
    </aside>
<!-- END Profile Menu -->
<!-- BEGIN Footer -->
        <footer>
            <div id="footerText">
            </div>
            <div id="legal">
                <u>Legal Statement</u> | Version 2.148 (92cbfeb)
            </div>
        </footer>
<!-- END Footer -->
<!-- BEGIN Deferred Scripts -->
        <script src="JS/french.js" defer></script>              <!-- Specific French section JavaScript Code -->
        <script src="JS/atsMsg.js" defer></script>              <!-- Specific ATS MSG section JavaScript Code -->
        <script src="JS/aipLibrary.js" defer></script>          <!-- Specific AIP Library section JavaScript Code -->
        <script src="JS/docScreeningTool.js" defer></script>    <!-- Specific DOC Screening Tool section JavaScript Code -->
        <script src="JS/sita.js" defer></script>                <!-- Specific SITA section JavaScript Code -->
        <script src="JS/apcodes.js" defer></script>             <!-- JSON for SITA section - Airport Codes -->
        <script src="JS/alcodes.js" defer></script>             <!-- JSON for SITA section - Airline Codes -->
        <script src="JS/convcodes.js" defer></script>           <!-- JSON for SITA section - Matching Address Pairs -->
        <script src="JS/corpcodes.js" defer></script>           <!-- JSON for SITA section - Department Codes -->
        <script src="JS/locisFK.js" defer></script>             <!-- JSON for DOC Tool - Flightkeys AD -->
        <script src="JS/locisFIR.js" defer></script>            <!-- JSON for DOC Tool - SWR FIR -->
        <script src="JS/locisSWR.js" defer></script>            <!-- JSON for DOC Tool - SWR AD -->
        <script src="JS/aipLinks.js" defer></script>            <!-- JSON for AIP Library - eAIP Links -->
        <script src="JS/dragDrop.js" defer></script>            <!-- Drag & Drop logic -->
        <script src="JS/lodash.js" defer></script>              <!-- lodash library -->
        <script src="Documents/FRENCH BIBLIOTHEK/sfo_helpdesk.js" defer></script>           <!-- JSON for French Table 1 -->
        <script src="Documents/FRENCH BIBLIOTHEK/skybriefing_helpdesk.js" defer></script>   <!-- JSON for French Table 2 -->
        <script src="Documents/FRENCH BIBLIOTHEK/aip_helpdesk.js" defer></script>           <!-- JSON for French Table 3 -->
        <script src="Documents/FRENCH BIBLIOTHEK/voci_tech_gen.js" defer></script>          <!-- JSON for French Table 4 -->
        <script src="Documents/FRENCH BIBLIOTHEK/voci_div.js" defer></script>               <!-- JSON for French Table 5 -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/dragula/3.6.6/dragula.min.js" integrity="sha512-MrA7WH8h42LMq8GWxQGmWjrtalBjrfIzCQ+i2EZA26cZ7OBiBd/Uct5S3NP9IBqKx5b+MMNH1PhzTsk6J9nPQQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>        <!-- dragula.js library CDN -->
        <script src="https://cdn.amcharts.com/lib/4/core.js"></script>                      <!-- amCharts library -->
        <script src="https://cdn.amcharts.com/lib/4/charts.js"></script>                    <!-- amCharts library -->
        <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>           <!-- amCharts library -->
        <script src="JS/firebase.js" defer></script>                                        <!-- Firebase configs -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha512-z4OUqw38qNLpn1libAN9BsoDx6nbNFio5lA6CuTp9NlK83b89hgyCVq+N5FdBJptINztxn1Z3SaKSKUS5UP60Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>          <!-- anime.js -->
        <!-- React code below due to script type module not working if served via file path -->
        <script data-type="module" type="text/babel">
        
        
    

 
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"; // Firebase Core
            import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile, onAuthStateChanged, sendPasswordResetEmail  } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"; // Firebase Auth
            import { getFirestore, collection, addDoc, getDocs, doc, getDoc, updateDoc, setDoc }  from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"; // Firebase Firestore
            
            const styleSheetStyles = document.getElementById("styleSheetStyles");
            const styleSheetMenubar = document.getElementById("styleSheetMenuBar");
            const styleSheetProfileMenu = document.getElementById("styleSheetProfileMenu");
            
            function checkMode(){
                    if(localStorage.getItem("toolbox_mode")){
                        if(localStorage.getItem("toolbox_mode") == "dark"){
                            styleSheetStyles.href = "CSS/styles_dark.css"
                styleSheetMenubar.href = "CSS/menubar_dark.css"
                styleSheetProfileMenu.href = "CSS/profileMenu_dark.css"
                localStorage.setItem("toolbox_mode", "dark");
                        } else {
                            styleSheetStyles.href = "CSS/styles.css"
                styleSheetMenubar.href = "CSS/menubar.css"
                styleSheetProfileMenu.href = "CSS/profileMenu.css"
                localStorage.setItem("toolbox_mode", "light");
                        }
                    }
                }
                
                    checkMode()
            
            const firebaseConfig = { // see firebase.js for configs. If you cloned this repo, you need to provide your own keys and tokens.
                apiKey: apiKey,
                authDomain: authDomain,
                projectId: projectId,
                storageBucket: storageBucket,
                messagingSenderId: messagingSenderId,
                appId: appId
            };
            
            const app = initializeApp(firebaseConfig);
            const db = getFirestore();
            const auth = getAuth();
            
            function CreateColorPickers(props){
                let components = props.data.map((value) => {
                    const {tile, color1, color2} = value
                    return(
                        <div class="homeTileColorChangers">
                            <label for="color1">{`${tile.toUpperCase()}:`}</label>
                            <div class="colorInputWrapper">
                                <input type="color" id={`colorPick_${tile}1`} class="homeTileColorPicker" />
                            </div>
                            <div class="colorInputWrapper">
                                <input type="color" id={`colorPick_${tile}2`} class="homeTileColorPicker" />
                            </div>
                            <div class="colorBox" id={`colorGradient_${tile}`}></div>
                            <button class="colorPickResetButton" id={`colorPickResetButton_${tile}`}>Reset</button>
                        </div>
                    )
                    
                     })
                return (
                    <>
                        {components}
                    </>
                    )
            }
            
            
            
            
            function Login(){
                return(
                    <div>
                        <div id="profilePictureContainer">
                            <i class="far fa-user-circle"></i>
                        </div>
                        <div id="loginContainer">
                            <input type="email" id="loginMail" placeholder="email" />
                            <input id="loginPassword" type="password" placeholder="password" onKeyPress={login} />
                            <h4 id="passwordForgotten" onClick={forgotPassword}>Forgot Password?</h4>
                            <button id="login" class="profileMenuButton" onClick={login}>Log in</button>
                        </div>
                        <div id="loginErrors"></div>
                        <div id="signup">
                            <h3>
                                No account?
                            </h3>
                            <button id="signupCall" class="profileMenuButton" >Sign up!</button>
                            <div id="reasonsWhy">
                                <h4>Why sign up?</h4>
                                <ul>
                                    <li>Darkmode!</li>
                                    <li>Other stuff in the future!</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                )
            }
            
            function forgotPassword(){
                ReactDOM.render(<ForgotPassword />, document.getElementById("profileMenuContainer"))
            }
            
            function login(e){
                if(e.key == "Enter" || e.button == 0){
                    const email = document.getElementById("loginMail").value
                    const password = document.getElementById("loginPassword").value
    
                    signInWithEmailAndPassword(auth, email, password)
                    .then(async (userCredential) => {
                        const user = userCredential.user;
                        const docRef = doc(db, "users", auth.currentUser.uid);
                        const docSnap = await getDoc(docRef);
                        let darkmode
                        if (docSnap.exists()) {
                            if(docSnap.data().darkmode){
                                hideTheSun()
                            } else {
                                praiseTheSun()
                            }
                        }
                    })
                    .catch((error) => {
                        let errorCode = error.code;
                        if (errorCode == "auth/user-not-found" || errorCode == "auth/wrong-password"){
                            errorCode = "Username and/or password do not match"
                        }
                        ReactDOM.render(<LoginError message={errorCode} />, document.getElementById("loginErrors"))
                        anime({
                            targets: '#loginErrors',
                            minHeight: "2rem", 
                            padding: "0.5em 0 0.5em 0",
                            delay: 0,
                            duration: 100,
                            direction: 'normal',
                            loop: false,
                            easing: 'linear'
                        });
                    })
                }
            }
            
            function ForgotPassword(){
                return(
                    <div>
                        <div id="profilePictureContainer">
                            <i class="far fa-user-circle"></i>
                        </div>
                        <div id="loggedinContainer">
                            <input type="email" id="forgotPassword" placeholder="email" />
                            <button id="forgotPasswordButton" class="profileMenuButton" onClick={sendNewPassword}>Send new Password</button>
                            <h4 id="passwordForgottenBack" onClick={initialProfileMenu}><u>Back</u></h4>
                            <div id="passwordSentDialog"></div>
                        </div>
                    </div>
                )
            }
            
            function Signup(){
                return(
                    <div>
                        <div id="profilePictureContainer">
                            <i class="far fa-user-circle"></i>
                        </div>
                        <div id="signupContainer">
                            <input type="email" id="signupMail" placeholder="email" />
                            <input type="text" id="signupName" placeholder="name" />
                            <input type="password" id="signupPassword" placeholder="password" />
                            <button id="signupButton" class="profileMenuButton" onClick={signAwayYourSoul}>Sign up!</button>
                            <h4 id="signupButtonBack" onClick={initialProfileMenu}><u>Back</u></h4>
                        </div>
                    </div>
                )
            }
            
            function sendNewPassword(){
                const email = document.getElementById("forgotPassword").value
                
                sendPasswordResetEmail(auth, email)
                .then(() => {
                    ReactDOM.render(<PasswordResetSuccess recipient={email} />, document.getElementById("passwordSentDialog"))
                })
                .catch((error) => {
                    const errorCode = error.code;
                    ReactDOM.render(<LoginError message={errorCode} />, document.getElementById("loginErrors"))
                    anime({
                        targets: '#loginErrors',
                        minHeight: "2rem", 
                        delay: 0,
                        duration: 100,
                        direction: 'normal',
                        loop: false,
                        easing: 'linear'
                    });
                });
            }
            
            function PasswordResetSuccess(props){
                const recipient = props.recipient
                return(
                    <div>
                        Password reset link sent to {recipient}.
                        If you do not receive a password reset link in the next couple of minutes,
                        please advise weberml directly.
                    </div>
                )
            }
            
            function LoginError(props){
                const errorMessage = props.message
                return(
                    <div>
                        Error: {errorMessage}
                    </div>
                )
            }
            
            function LoggedIn(props){
                const userID = props.data
                console.log(`User: ${userID}`)
                return(
                    <div style={{width: "100%"}}> {/* this is a weird and stupid fix for a weird and stupid problem */}                
                        <div id="profilePictureContainer">
                            <i class="far fa-user-circle"></i>
                        </div>
                        <h2 id="welcomeUser">{userID}</h2>
                        <div id="loggedinContainer">
                            <div id="optionsContainerDarkmode" class="optionsContainer">
                                <label for="darkmode">Darkmode</label>
                                <div class="toggler">
                                    <input type="checkbox" id="check_darkmode" class="togglerCheckBox" onChange={toggleDarkmode}/>
                                    <div id="togglerBody_darkmode" class="togglerBody">
                                        <div id="togglerSwitch_darkmode" class="togglerSwitchOff"><i class="fas fa-power-off"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div id="optionsContainerFavorites" class="optionsContainer">
                                <label for="favorites">Favorites</label>
                                <div class="toggler">
                                    <input type="checkbox" id="check_favorites" class="togglerCheckBox" onChange={toggleFavorites}/>
                                    <div id="togglerBody_favorites" class="togglerBody">
                                        <div id="togglerSwitch_favorites" class="togglerSwitchOff"><i class="fas fa-power-off"></i></div>
                                    </div>
                                </div>
                            </div>
                             <button id="profilePictureChangeButton" class="profileMenuButton" onClick={changeProfilePicture}>Change Profile Picture URL</button>
                            <button id="logoutButton" class="profileMenuButton" onClick={logout}>Log out</button>
                            <div id="optionsContainerColorPickers" class="optionsContainerPanel">
                                
                            </div>
                        </div>
                    </div>
                )
            }

            
           async function changeProfilePicture(){
                let profilePictureUrl  = prompt("Enter image URL:" , "")
                if(profilePictureUrl != null && profilePictureUrl != ""){
                        
                const userDocumentReference = doc(db, "users", auth.currentUser.uid);
                    await updateDoc(userDocumentReference, {
                        profile_picture: profilePictureUrl
                    });
                        
                    const docRef = doc(db, "users", auth.currentUser.uid);
                    const docSnap = await getDoc(docRef);

                    if (!docSnap.exists()) {
                        console.log("No such document: changeProfilePicture()!");
                    }
                    favoriteBarToggler(docSnap.data().profile_picture)
                    
                    setProfilePicture(docSnap.data().profile_picture)
                    }
                    
                    }
                    function setProfilePicture(url){
                
                document.getElementById("profilePictureContainer").innerHTML = ""
                document.getElementById("profilePictureContainer").style.backgroundImage = `url("${url}")`
                document.getElementById("profilePictureContainer").style.backgroundSize = "cover"
                document.getElementById("profilePictureContainer").style.backgroundRepeat ="no-repeat"
                document.getElementById("profilePictureContainer").style.backgroundPosition ="center"
                document.getElementById("profileMenuToggle").innerHTML = ""
                document.getElementById("profileMenuToggle").style.backgroundImage = `url("${url}")`
                document.getElementById("profileMenuToggle").style.backgroundSize = "cover"
                document.getElementById("profileMenuToggle").style.backgroundRepeat ="no-repeat"
                document.getElementById("profileMenuToggle").style.backgroundPosition ="center"
                document.getElementById("profileMenuToggle").style.aspectRatio ="1/1"
                document.getElementById("profileMenuToggle").style.borderRadius ="50%"
                }
                
                
                
                
            
            function hideTheSun(){
                toggleStyleOn("darkmode")
                
                styleSheetStyles.href = "CSS/styles_dark.css"
                styleSheetMenubar.href = "CSS/menubar_dark.css"
                styleSheetProfileMenu.href = "CSS/profileMenu_dark.css"
                localStorage.setItem("toolbox_mode", "dark");
                
            }
            
            function praiseTheSun(){
                toggleStyleOff("darkmode")
                
                
                styleSheetStyles.href = "CSS/styles.css"
                styleSheetMenubar.href = "CSS/menubar.css"
                styleSheetProfileMenu.href = "CSS/profileMenu.css"
                localStorage.setItem("toolbox_mode", "light");
            }
            
            function toggleStyleOn(mode){
                document.getElementById(`togglerBody_${mode}`).style.background = "blue"
                document.getElementById(`togglerSwitch_${mode}`).classList.add("togglerSwitchOn")
                document.getElementById(`check_${mode}`).checked = true
                }
            function toggleStyleOff(mode){
                document.getElementById(`togglerBody_${mode}`).style.background = "grey"
                document.getElementById(`togglerSwitch_${mode}`).classList.remove("togglerSwitchOn")
                document.getElementById(`check_${mode}`).checked = false
                }
            
            async function theSunWillDarkenAnddDarknessShallBefallThisRottenEarthlyPlanesForAllEternety(){
                const userDocumentReference = doc(db, "users", auth.currentUser.uid);
                await updateDoc(userDocumentReference, {
                    darkmode: true
                });
                    
                const docRef = doc(db, "users", auth.currentUser.uid);
                const docSnap = await getDoc(docRef);

                if (!docSnap.exists()) {
                    
                    console.log("No such document: theSunWillDarkenAnddDarknessShallBefallThisRottenEarthlyPlanesForAllEternety()!");
                }
                
                hideTheSun()
                
            }
            
            async function theSunlightHasOnceAgainGracedTheseForsakenLandsAndWarmsTheCorpsesOfHopeAndHumanity(){
                const userDocumentReference = doc(db, "users", auth.currentUser.uid);
                await updateDoc(userDocumentReference, {
                    darkmode: false
                });
                    
                const docRef = doc(db, "users", auth.currentUser.uid);
                const docSnap = await getDoc(docRef);

                if (!docSnap.exists()) {

                    console.log("No such document: theSunlightHasOnceAgainGracedTheseForsakenLandsAndWarmsTheCorpsesOfHopeAndHumanity()!");
                }
                
                praiseTheSun()
            }
                
            
            function toggleDarkmode(){
                if(document.getElementById("check_darkmode").checked){ // darkmode ON
                    theSunWillDarkenAnddDarknessShallBefallThisRottenEarthlyPlanesForAllEternety()
                } else { // darkmode OFF
                    theSunlightHasOnceAgainGracedTheseForsakenLandsAndWarmsTheCorpsesOfHopeAndHumanity()
                }
            }
            
            async function toggleFavorites(){
                if(document.getElementById("check_favorites").checked){ // darkmode ON
                    toggleStyleOn("favorites")
                    const userDocumentReference = doc(db, "users", auth.currentUser.uid);
                    await updateDoc(userDocumentReference, {
                        favorites: "grid"
                    });
                        
                    const docRef = doc(db, "users", auth.currentUser.uid);
                    const docSnap = await getDoc(docRef);

                    if (!docSnap.exists()) {

                        console.log("No such document: toggleFavorites() 1!");
                    }
                    favoriteBarToggler(docSnap.data().favorites)
                } else { // darkmode OFF
                    toggleStyleOff("favorites")
                    const userDocumentReference = doc(db, "users", auth.currentUser.uid);
                    await updateDoc(userDocumentReference, {
                        favorites: "none"
                    });
                        
                    const docRef = doc(db, "users", auth.currentUser.uid);
                    const docSnap = await getDoc(docRef);

                    if (!docSnap.exists()) {

                        console.log("No such document toggleFavorites() 2!");
                    }
                    favoriteBarToggler(docSnap.data().favorites)
                }
                
            }
            
            function favoriteBarToggler(favoriteStyle){
         if(favoriteStyle == "none"){
            document.getElementById("favoritesBar").style.display = "none"
            localStorage.setItem("toolbox_favoritesbar", JSON.stringify(["favoritesBarToggle","none", "far", 3]))
            document.getElementById("favoritesTogglor").innerHTML = '<i class="far fa-star"></i>'
            document.getElementById("quickLinks").style.margin = "3rem 0 2rem 0"
         } else if (favoriteStyle == "grid"){
            document.getElementById("favoritesBar").style.display = "grid"
            localStorage.setItem("toolbox_favoritesbar", JSON.stringify(["favoritesBarToggle","grid", "fas", 1]))
            document.getElementById("favoritesTogglor").innerHTML = '<i class="fas fa-star"></i>'
            document.getElementById("quickLinks").style.margin = "1rem 0 2rem 0"
        }
    }
            
            
            function logout(){
            auth.signOut()
                            .then(() => {
                                console.log("signed out")
                                document.getElementById("profileMenuToggle").innerHTML = `<i class="far fa-user-circle"></i>`
                                document.getElementById("profileMenuToggle").style.backgroundImage = null
                            })
                            .catch((error) => {
                                const errorCode = error.code;
                                const errorMessage = error.message;
                                console.log(`Sign out error: ${errorMessage}`)
                            });
                            }
            
            function signAwayYourSoul(){
                const email = document.getElementById("signupMail").value
                const password = document.getElementById("signupPassword").value
                const name = document.getElementById("signupName").value 
                
                createUserWithEmailAndPassword(auth, email, password)
                    .then((userCredential) => {
                        const user = userCredential.user;
                        updateProfile(auth.currentUser, {
                            displayName: name, 
                        })
                            .then(() => {
                                
                                ReactDOM.render(<LoggedIn data={auth.currentUser.displayName} />, document.getElementById("profileMenuContainer"))
                            })
                            .catch((error) => {
                                console.log(`Update current user error: ${error}`)
                            })
                        try {
                        console.log(auth.currentUser.uid)
                            const docRef =  setDoc(doc(db, "users", auth.currentUser.uid), {
                                darkmode: false
                            })
                    console.log("Document written with ID: ", docRef.id);
                } catch (e) {
                    console.error("Error adding document: ", e);
                }
                    })
                    .catch((error) => {
                        const errorCode = error.code;
                        const errorMessage = error.message;
                        console.log(errorMessage)
                    })
                
            }
            
            
            
            const homeTileColors = 
                [
                {
                tile: "general",
                color1: "#ffa84c",
                color2: "#ff7a0d"
                }, {              
                tile: "spvr",
                color1: "#c85ec7",
                color2: "#a849a3"
                }, {
                tile: "aro",
                color1: "#a7cfdf",
                color2: "#23538a"
                }, {
                tile: "doc",
                color1: "#ff3019",
                color2: "#cf0404"
                }, {
                tile: "pub",
                color1: "#299a0b",
                color2: "#2a9a0b"
                },  {
                tile: "sfo",
                color1: "#ffd65e",
                color2: "#fec004"
                },
                ]
  
    function initialHomeTilecolors(){
        homeTileColors.forEach(homeTileColor => {
            changeColorGradient(homeTileColor.tile, homeTileColor.color1, homeTileColor.color2)
        })
    }

    async function changeColorGradient(tile, color1, color2){
        const containerBoxes = document.querySelectorAll(".quicklinksContainerBox")
        if(document.getElementById(`colorPick_${tile}1`)){
            document.getElementById(`colorPick_${tile}1`).value = color1
            document.getElementById(`colorPick_${tile}2`).value = color2
            document.getElementById(`colorGradient_${tile}`).style.background = `linear-gradient(45deg, ${color1} 0%, ${color2} 100%)`
        
        
	
		const userDocumentReference = doc(db, "users", auth.currentUser.uid);
        await updateDoc(userDocumentReference, {
            customColors: true,
            [tile]: {
                tile: tile,
                color1: color1,
                color2: color2
            }
        });
                        
        const docRef = doc(db, "users", auth.currentUser.uid);
        const docSnap = await getDoc(docRef);
        if (!docSnap.exists()) {

            console.log("No such document: changeColorGradient()!");
        }
}
        containerBoxes.forEach(containerBox => {
            let category = containerBox.getAttribute("category")
            if(category === tile){
                containerBox.style.background = `linear-gradient(45deg, ${color1} 0%, ${color2} 100%)`
            }
        })
    }
    
    
    
    
    function pickTheColor(){
    const homeTileColorPickers = document.querySelectorAll(".homeTileColorPicker")

    homeTileColorPickers.forEach(homeTileColorPicker => {

        homeTileColorPicker.addEventListener("change", function (){

            const getColorPickerBinding = homeTileColorPicker.id.split("_")
            const colorPickerBindingLength = getColorPickerBinding[1].length
            const colorPickerBinding = getColorPickerBinding[1].substring(0, colorPickerBindingLength-1)
            
            changeColorGradient(colorPickerBinding, document.getElementById(`colorPick_${colorPickerBinding}1`).value, document.getElementById(`colorPick_${colorPickerBinding}2`).value)
        })
    })
    }
    
    
    function resetTheColor(){
    const colorResetButtons = document.querySelectorAll(".colorPickResetButton")

    colorResetButtons.forEach(colorResetButton => {
        colorResetButton.addEventListener("click", function(){
            const getColorResetButtonBinding = colorResetButton.id.split("_")
            homeTileColors.forEach(homeTileColor => {
                if(homeTileColor.tile === getColorResetButtonBinding[1]){
                    changeColorGradient(homeTileColor.tile, homeTileColor.color1, homeTileColor.color2)
                }
            })
        })
    })
    }
            
    onAuthStateChanged(auth, async (user) => {
        if (user) {
            const uid = user.displayName;
            
            ReactDOM.render(<LoggedIn data={uid} />, document.getElementById("profileMenuContainer"))
            ReactDOM.render(<CreateColorPickers data={homeTileColors} />, document.getElementById("optionsContainerColorPickers"))
            
            const docRef = doc(db, "users", auth.currentUser.uid);
            const docSnap = await getDoc(docRef);
            let darkmode
                
            if (docSnap.exists()) {
                if(docSnap.data().darkmode){
                    hideTheSun()
                } else {
                    praiseTheSun()
                }
                if(docSnap.data().favorites == "grid"){
                    favoriteBarToggler(docSnap.data().favorites)
                    toggleStyleOn("favorites")
                } else {
                    favoriteBarToggler(docSnap.data().favorites)
                    toggleStyleOff("favorites")
                }
                if(docSnap.data().profile_picture){
                    setProfilePicture(docSnap.data().profile_picture)
                } 
                setTimeout(function(){
        resetTheColor()
    },500)
    setTimeout(function(){
        pickTheColor()
    },500)
                if(docSnap.data().customColors){
                    if(docSnap.data().aro){
                        changeColorGradient(docSnap.data().aro.tile, docSnap.data().aro.color1, docSnap.data().aro.color2)
                  }
                    if(docSnap.data().spvr){

                            changeColorGradient(docSnap.data().spvr.tile, docSnap.data().spvr.color1, docSnap.data().spvr.color2)

                    }
                    if(docSnap.data().pub){

                            changeColorGradient(docSnap.data().pub.tile, docSnap.data().pub.color1, docSnap.data().pub.color2)

                    }
                    if(docSnap.data().sfo){

                            changeColorGradient(docSnap.data().sfo.tile, docSnap.data().sfo.color1, docSnap.data().sfo.color2)

                    }
                    if(docSnap.data().general){

                            changeColorGradient(docSnap.data().general.tile, docSnap.data().general.color1, docSnap.data().general.color2)

                    }
                    if(docSnap.data().doc){

                            changeColorGradient(docSnap.data().doc.tile, docSnap.data().doc.color1, docSnap.data().doc.color2)

                    }
                } else {
                    initialHomeTilecolors()
                }
            }
        } else {
            console.log("no user logged in")
            initialProfileMenu()
            initialHomeTilecolors()
        }
    })
                
    function initialProfileMenu(){
        ReactDOM.render(<Login/>, document.getElementById("profileMenuContainer"))
        setTimeout(function(){
            document.getElementById("signupCall").addEventListener("click", function(){                        
                ReactDOM.render(<Signup/>, document.getElementById("profileMenuContainer"))
            })
        },100)
    }
                    
                    
  
</script>
<!-- END Deferred Scripts -->
    </body>
<!-- END Body -->
</html>
